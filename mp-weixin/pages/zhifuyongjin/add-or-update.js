(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/zhifuyongjin/add-or-update"],{"17b0":function(n,a,e){"use strict";e.r(a);var t=e("9f9c"),i=e("cbad");for(var r in i)"default"!==r&&function(n){e.d(a,n,(function(){return i[n]}))}(r);e("9934");var o,s=e("f0c5"),u=Object(s["a"])(i["default"],t["b"],t["c"],!1,null,"09063bc1",null,!1,t["a"],o);a["default"]=u.exports},8257:function(n,a,e){"use strict";(function(n){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var t=i(e("a34a"));function i(n){return n&&n.__esModule?n:{default:n}}function r(n,a,e,t,i,r,o){try{var s=n[r](o),u=s.value}catch(h){return void e(h)}s.done?a(u):Promise.resolve(u).then(t,i)}function o(n){return function(){var a=this,e=arguments;return new Promise((function(t,i){var o=n.apply(a,e);function s(n){r(o,t,i,s,u,"next",n)}function u(n){r(o,t,i,s,u,"throw",n)}s(void 0)}))}}var s=function(){return Promise.all([e.e("common/vendor"),e.e("components/w-picker/w-picker")]).then(e.bind(null,"e2b1"))},u=function(){return e.e("components/xia-editor/xia-editor").then(e.bind(null,"064f"))},h={data:function(){return{cross:"",ruleForm:{qianbaobianhao:"",yanyuanzhanghao:"",nicheng:"",yongjin:"",beizhu:"",fukuanshijian:"",shangjiazhanghao:"",shangjianicheng:"",lianxifangshi:"",shangjiazhaopian:""},qianbaobianhaoOptions:[],qianbaobianhaoIndex:0,user:{},ro:{qianbaobianhao:!1,yanyuanzhanghao:!1,nicheng:!1,yongjin:!1,beizhu:!1,fukuanshijian:!1,shangjiazhanghao:!1,shangjianicheng:!1,lianxifangshi:!1,shangjiazhaopian:!1}}},components:{wPicker:s,xiaEditor:u},computed:{baseUrl:function(){return this.$base.url}},onLoad:function(){var a=o(t.default.mark((function a(e){var i,r,o,s;return t.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return this.ruleForm.fukuanshijian=this.$utils.getCurDateTime(),i=n.getStorageSync("nowTable"),a.next=4,this.$api.session(i);case 4:return r=a.sent,this.user=r.data,this.ruleForm.shangjiazhanghao=this.user.shangjiazhanghao,this.ro.shangjiazhanghao=!0,this.ruleForm.shangjianicheng=this.user.shangjianicheng,this.ro.shangjianicheng=!0,this.ruleForm.lianxifangshi=this.user.lianxifangshi,this.ro.lianxifangshi=!0,a.next=14,this.$api.option("qianbao","qianbaobianhao",{});case 14:if(r=a.sent,this.qianbaobianhaoOptions=r.data,this.ruleForm.userid=n.getStorageSync("userid"),e.refid&&(this.ruleForm.refid=e.refid,this.ruleForm.nickname=n.getStorageSync("nickname")),!e.id){a.next=24;break}return this.ruleForm.id=e.id,a.next=22,this.$api.info("zhifuyongjin",this.ruleForm.id);case 22:r=a.sent,this.ruleForm=r.data;case 24:if(this.cross=e.cross,!e.cross){a.next=74;break}o=n.getStorageSync("crossObj"),a.t0=t.default.keys(o);case 28:if((a.t1=a.t0()).done){a.next=72;break}if(s=a.t1.value,"qianbaobianhao"!=s){a.next=34;break}return this.ruleForm.qianbaobianhao=o[s],this.ro.qianbaobianhao=!0,a.abrupt("continue",28);case 34:if("yanyuanzhanghao"!=s){a.next=38;break}return this.ruleForm.yanyuanzhanghao=o[s],this.ro.yanyuanzhanghao=!0,a.abrupt("continue",28);case 38:if("nicheng"!=s){a.next=42;break}return this.ruleForm.nicheng=o[s],this.ro.nicheng=!0,a.abrupt("continue",28);case 42:if("yongjin"!=s){a.next=46;break}return this.ruleForm.yongjin=o[s],this.ro.yongjin=!0,a.abrupt("continue",28);case 46:if("beizhu"!=s){a.next=50;break}return this.ruleForm.beizhu=o[s],this.ro.beizhu=!0,a.abrupt("continue",28);case 50:if("fukuanshijian"!=s){a.next=54;break}return this.ruleForm.fukuanshijian=o[s],this.ro.fukuanshijian=!0,a.abrupt("continue",28);case 54:if("shangjiazhanghao"!=s){a.next=58;break}return this.ruleForm.shangjiazhanghao=o[s],this.ro.shangjiazhanghao=!0,a.abrupt("continue",28);case 58:if("shangjianicheng"!=s){a.next=62;break}return this.ruleForm.shangjianicheng=o[s],this.ro.shangjianicheng=!0,a.abrupt("continue",28);case 62:if("lianxifangshi"!=s){a.next=66;break}return this.ruleForm.lianxifangshi=o[s],this.ro.lianxifangshi=!0,a.abrupt("continue",28);case 66:if("shangjiazhaopian"!=s){a.next=70;break}return this.ruleForm.shangjiazhaopian=o[s].split(",")[0],this.ro.shangjiazhaopian=!0,a.abrupt("continue",28);case 70:a.next=28;break;case 72:this.ruleForm.yongjin=0,this.ro.yongjin=!1;case 74:this.styleChange();case 75:case"end":return a.stop()}}),a,this)})));function e(n){return a.apply(this,arguments)}return e}(),methods:{styleChange:function(){this.$nextTick((function(){}))},qianbaobianhaoChange:function(){var n=o(t.default.mark((function n(a){var e;return t.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return this.qianbaobianhaoIndex=a.target.value,this.ruleForm.qianbaobianhao=this.qianbaobianhaoOptions[this.qianbaobianhaoIndex],n.next=4,this.$api.follow("qianbao","qianbaobianhao",{columnValue:this.ruleForm.qianbaobianhao});case 4:e=n.sent,e.data.yanyuanzhanghao&&(this.ruleForm.yanyuanzhanghao=e.data.yanyuanzhanghao),e.data.nicheng&&(this.ruleForm.nicheng=e.data.nicheng);case 7:case"end":return n.stop()}}),n,this)})));function a(a){return n.apply(this,arguments)}return a}(),fukuanshijianConfirm:function(n){console.log(n),this.ruleForm.fukuanshijian=n.result,this.$forceUpdate()},shangjiazhaopianTap:function(){var n=this;this.$api.upload((function(a){n.ruleForm.shangjiazhaopian="upload/"+a.file,n.$forceUpdate(),n.$nextTick((function(){n.styleChange()}))}))},getUUID:function(){return(new Date).getTime()},onSubmitTap:function(){var a=o(t.default.mark((function a(){var e,i,r,o,s,u,h,c,l,g;return t.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!this.ruleForm.yongjin||this.$validate.isIntNumer(this.ruleForm.yongjin)){a.next=3;break}return this.$utils.msg("佣金应输入整数"),a.abrupt("return");case 3:if(!this.cross){a.next=19;break}if(s=n.getStorageSync("statusColumnName"),u=n.getStorageSync("statusColumnValue"),""==s){a.next=19;break}if(e||(e=n.getStorageSync("crossObj")),s.startsWith("[")){a.next=15;break}for(h in e)h==s&&(e[h]=u);return c=n.getStorageSync("crossTable"),a.next=13,this.$api.update("".concat(c),e);case 13:a.next=19;break;case 15:i=Number(n.getStorageSync("userid")),r=e["id"],o=n.getStorageSync("statusColumnName"),o=o.replace(/\[/,"").replace(/\]/,"");case 19:if(!r||!i){a.next=46;break}return this.ruleForm.crossuserid=i,this.ruleForm.crossrefid=r,l={page:1,limit:10,crossuserid:i,crossrefid:r},a.next=25,this.$api.list("zhifuyongjin",l);case 25:if(g=a.sent,!(g.data.total>=o)){a.next=31;break}return this.$utils.msg(n.getStorageSync("tips")),a.abrupt("return",!1);case 31:return e||(e=n.getStorageSync("crossObj")),c=n.getStorageSync("crossTable"),e.yongjin=parseFloat(e.yongjin)+parseFloat(this.ruleForm.yongjin),a.next=36,this.$api.update("".concat(c),e);case 36:if(!this.ruleForm.id){a.next=41;break}return a.next=39,this.$api.update("zhifuyongjin",this.ruleForm);case 39:a.next=43;break;case 41:return a.next=43,this.$api.add("zhifuyongjin",this.ruleForm);case 43:this.$utils.msgBack("提交成功");case 44:a.next=59;break;case 46:return e||(e=n.getStorageSync("crossObj")),c=n.getStorageSync("crossTable"),e.yongjin=parseFloat(e.yongjin)+parseFloat(this.ruleForm.yongjin),a.next=51,this.$api.update("".concat(c),e);case 51:if(!this.ruleForm.id){a.next=56;break}return a.next=54,this.$api.update("zhifuyongjin",this.ruleForm);case 54:a.next=58;break;case 56:return a.next=58,this.$api.add("zhifuyongjin",this.ruleForm);case 58:this.$utils.msgBack("提交成功");case 59:case"end":return a.stop()}}),a,this)})));function e(){return a.apply(this,arguments)}return e}(),optionsChange:function(n){this.index=n.target.value},bindDateChange:function(n){this.date=n.target.value},getDate:function(n){var a=new Date,e=a.getFullYear(),t=a.getMonth()+1,i=a.getDate();return"start"===n?e-=60:"end"===n&&(e+=2),t=t>9?t:"0"+t,i=i>9?i:"0"+i,"".concat(e,"-").concat(t,"-").concat(i)},toggleTab:function(n){this.$refs[n].show()}}};a.default=h}).call(this,e("543d")["default"])},9934:function(n,a,e){"use strict";var t=e("ede4"),i=e.n(t);i.a},"9f9c":function(n,a,e){"use strict";var t={"w-picker":()=>Promise.all([e.e("common/vendor"),e.e("components/w-picker/w-picker")]).then(e.bind(null,"e2b1"))},i=function(){var n=this,a=n.$createElement,e=(n._self._c,n.ruleForm.shangjiazhaopian.split(","));n.$mp.data=Object.assign({},{$root:{g0:e}})},r=[];e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return r})),e.d(a,"a",(function(){return t}))},b07c:function(n,a,e){"use strict";(function(n){e("6cdc"),e("921b");t(e("66fd"));var a=t(e("17b0"));function t(n){return n&&n.__esModule?n:{default:n}}n(a.default)}).call(this,e("543d")["createPage"])},cbad:function(n,a,e){"use strict";e.r(a);var t=e("8257"),i=e.n(t);for(var r in t)"default"!==r&&function(n){e.d(a,n,(function(){return t[n]}))}(r);a["default"]=i.a},ede4:function(n,a,e){}},[["b07c","common/runtime","common/vendor"]]]);